# ğŸ“Š æ¨¡å—7çœŸå®æ•°æ®æ•´åˆåˆ†ææŠ¥å‘Š

> **ä¼˜åŒ–ç›®æ ‡**: ä»æ¨¡æ‹Ÿæ•°æ®è½¬å‘çœŸå®æ•°æ®æå–ï¼Œæ„å»ºå¯é…ç½®çš„RQAå‚æ•°é€‰æ‹©ç³»ç»Ÿ  
> **åˆ†ææ—¶é—´**: 2025å¹´1æœˆ  
> **çŠ¶æ€**: ğŸ” **éœ€æ±‚åˆ†æä¸­**

---

## ğŸ¯ **ç”¨æˆ·ä¼˜åŒ–éœ€æ±‚åˆ†æ**

### **æ ¸å¿ƒéœ€æ±‚**
1. **åˆ é™¤æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå‡½æ•°**: ç§»é™¤æ‰€æœ‰éšæœºæ•°æ®ç”Ÿæˆä»£ç 
2. **çœŸå®æ•°æ®æ•´åˆ**: ä»å®é™…VRå®éªŒæ•°æ®ä¸­æå–10ä¸ªå½’ä¸€åŒ–å±æ€§
3. **å¤šæºæ•°æ®èåˆ**: æ•´åˆæ ¡å‡†æ•°æ®ã€äº‹ä»¶åˆ†æã€RQAç»“æœ
4. **RQAå‚æ•°é€‰æ‹©**: æ”¯æŒä¸åŒRQAå‚æ•°çš„åŠ¨æ€é€‰æ‹©
5. **ç›®å½•ç»“æ„ä¼˜åŒ–**: æŒ‰RQAå‚æ•°ç»„ç»‡å­˜å‚¨ç»“æœ

### **10ä¸ªç›®æ ‡å±æ€§**
```javascript
// éœ€è¦ä»çœŸå®æ•°æ®æå–çš„å±æ€§
const targetAttributes = [
    'game_duration_norm',     // æ¸¸æˆæ—¶é•¿ï¼ˆå½’ä¸€åŒ–ï¼‰
    'roi_kw_time_norm',       // å…³é”®è¯ROIæ—¶é—´
    'roi_inst_time_norm',     // æŒ‡ç¤ºROIæ—¶é—´  
    'roi_bg_time_norm',       // èƒŒæ™¯ROIæ—¶é—´
    'rr_1d_norm',            // RQA 1Dé€’å½’ç‡
    'det_1d_norm',           // RQA 1Dç¡®å®šæ€§
    'ent_1d_norm',           // RQA 1Dç†µ
    'rr_2d_norm',            // RQA 2Dé€’å½’ç‡
    'det_2d_norm',           // RQA 2Dç¡®å®šæ€§
    'ent_2d_norm'            // RQA 2Dç†µ
];
```

---

## ğŸ“ **çœŸå®æ•°æ®æºåˆ†æ**

### **æ•°æ®æºæ˜ å°„**
| å±æ€§ç±»åˆ« | æ•°æ®æº | æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|-------|----------|-----|
| **æ¸¸æˆæ—¶é•¿** | æ ¡å‡†æ•°æ® | `data/*/calibrated/*/n*q*_preprocessed_calibrated.csv` | è®¡ç®—æ€»æ—¶é•¿å¹¶å½’ä¸€åŒ– |
| **ROIç‰¹å¾** | äº‹ä»¶åˆ†æ | `data/event_analysis_results/All_ROI_Summary.csv` | KW/INST/BGçš„FixTime |
| **RQAç‰¹å¾** | RQAç®¡é“ | `data/rqa_pipeline_results/*/step1_rqa_calculation/RQA_1D2D_summary_*.csv` | 1D/2Dçš„RR/DET/ENT |

### **æ•°æ®æ–‡ä»¶ç»“æ„**

#### **1. æ ¡å‡†æ•°æ®** (`*/calibrated/*/*.csv`)
```csv
# ç¤ºä¾‹ï¼šn1q1_preprocessed_calibrated.csv
timestamp,x,y,validity,pupil_diameter
0,512.5,384.2,1,3.45
16,513.1,385.0,1,3.42
...
# ç”¨é€”ï¼šè®¡ç®—game_duration_norm = (last_timestamp - first_timestamp) / max_duration
```

#### **2. ROIäº‹ä»¶æ‘˜è¦** (`event_analysis_results/All_ROI_Summary.csv`)
```csv
ADQ_ID,ROI,FixTime,EnterCount,RegressionCount,Group
n1q1,KW_n2q1_4,2.569,4,3,control
n1q1,INST_n2q1_1,0.612,1,0,control
n1q1,BG_n2q1,1.1,3,2,control
# ç”¨é€”ï¼šæå–KW/INST/BGçš„FixTimeå¹¶å½’ä¸€åŒ–
```

#### **3. RQAè®¡ç®—ç»“æœ** (`rqa_pipeline_results/*/step1_rqa_calculation/RQA_1D2D_summary_*.csv`)
```csv
# é¢„æœŸå­—æ®µï¼ˆéœ€è¦éªŒè¯ï¼‰
session_id,subject_id,task_id,RR_1D,DET_1D,ENT_1D,RR_2D,DET_2D,ENT_2D
# ç”¨é€”ï¼šç›´æ¥è·å–RQAæŒ‡æ ‡å¹¶å½’ä¸€åŒ–
```

---

## ğŸ—ï¸ **ç³»ç»Ÿæ¶æ„è®¾è®¡**

### **æ–°çš„æ¨¡å—7æ¶æ„**
```
æ¨¡å—7ï¼šçœŸå®æ•°æ®æ•´åˆç³»ç»Ÿ
â”œâ”€â”€ 1. RQAå‚æ•°é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ å¯ç”¨å‚æ•°åˆ—è¡¨ï¼šm2_tau1_eps0.055_lmin2, ...
â”‚   â”œâ”€â”€ å‚æ•°é€‰æ‹©ç•Œé¢
â”‚   â””â”€â”€ åŠ¨æ€åŠ è½½å¯¹åº”RQAç»“æœ
â”œâ”€â”€ 2. æ•°æ®æå–å¼•æ“
â”‚   â”œâ”€â”€ æ ¡å‡†æ•°æ®å¤„ç†å™¨ â†’ game_duration_norm
â”‚   â”œâ”€â”€ ROIäº‹ä»¶å¤„ç†å™¨ â†’ roi_*_time_norm (3ä¸ª)
â”‚   â””â”€â”€ RQAç»“æœå¤„ç†å™¨ â†’ rr_*_norm, det_*_norm, ent_*_norm (6ä¸ª)
â”œâ”€â”€ 3. æ•°æ®æ•´åˆå™¨
â”‚   â”œâ”€â”€ å¤šæºæ•°æ®åˆå¹¶
â”‚   â”œâ”€â”€ å½’ä¸€åŒ–å¤„ç†
â”‚   â””â”€â”€ ä¸€è‡´æ€§éªŒè¯
â””â”€â”€ 4. ç»“æœå­˜å‚¨ç®¡ç†
    â”œâ”€â”€ æŒ‰RQAå‚æ•°åˆ†ç±»å­˜å‚¨
    â”œâ”€â”€ ç‰ˆæœ¬æ§åˆ¶
    â””â”€â”€ ç¼“å­˜ç®¡ç†
```

### **ç›®å½•ç»“æ„è®¾è®¡**
```
data/
â”œâ”€â”€ normalized_features/          # å½“å‰å­˜åœ¨çš„å½’ä¸€åŒ–æ•°æ®
â”‚   â””â”€â”€ normalized_features_summary.csv
â”œâ”€â”€ module7_integrated_results/   # æ–°å»ºï¼šæ¨¡å—7æ•´åˆç»“æœ
â”‚   â”œâ”€â”€ m2_tau1_eps0.055_lmin2/  # æŒ‰RQAå‚æ•°å‘½å
â”‚   â”‚   â”œâ”€â”€ integrated_features_summary.csv
â”‚   â”‚   â”œâ”€â”€ metadata.json
â”‚   â”‚   â””â”€â”€ extraction_log.txt
â”‚   â”œâ”€â”€ m3_tau2_eps0.1_lmin3/    # å…¶ä»–RQAå‚æ•°ç»„åˆ
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ available_configs.json    # å¯ç”¨é…ç½®åˆ—è¡¨
â””â”€â”€ [existing data sources...]
```

---

## ğŸ”„ **æ•°æ®å¤„ç†æµç¨‹**

### **Phase 1: æ•°æ®æ”¶é›†**
```
1. æ‰«æavailable RQA configurations
   â”œâ”€â”€ è¯»å– rqa_pipeline_results/ ä¸‹çš„æ‰€æœ‰ç›®å½•
   â”œâ”€â”€ è§£ææ¯ä¸ªmetadata.json
   â””â”€â”€ æ„å»ºå¯é€‰é…ç½®åˆ—è¡¨

2. ç”¨æˆ·é€‰æ‹©RQAå‚æ•° â†’ ç›®æ ‡é…ç½®ç¡®å®š

3. æ‰¹é‡è¯»å–ä¸‰ç±»æ•°æ®æº
   â”œâ”€â”€ æ ¡å‡†æ•°æ®ï¼šæ‰€æœ‰ */calibrated/*/*.csv
   â”œâ”€â”€ ROIäº‹ä»¶ï¼ševent_analysis_results/All_ROI_Summary.csv  
   â””â”€â”€ RQAç»“æœï¼šå¯¹åº”å‚æ•°çš„RQA_1D2D_summary_*.csv
```

### **Phase 2: ç‰¹å¾æå–**
```
For each subject_task (e.g., n1q1, m5q2, ad10q3):

1. game_duration_norm:
   â”œâ”€â”€ è¯»å–å¯¹åº”çš„calibrated.csv
   â”œâ”€â”€ duration = last_timestamp - first_timestamp
   â””â”€â”€ normalized = duration / max_duration_across_all

2. roi_*_time_norm (KW/INST/BG):
   â”œâ”€â”€ ä»ROI Summaryç­›é€‰å¯¹åº”ADQ_IDå’ŒROIç±»å‹
   â”œâ”€â”€ èšåˆFixTime (sum or mean)
   â””â”€â”€ normalized = fixtime / max_fixtime_per_roi_type

3. rqa_*_norm (RR/DET/ENT for 1D/2D):
   â”œâ”€â”€ ä»RQA SummaryåŒ¹é…session_id
   â”œâ”€â”€ æå–6ä¸ªRQAæŒ‡æ ‡åŸå§‹å€¼
   â””â”€â”€ normalized = (value - min) / (max - min)
```

### **Phase 3: æ•°æ®æ•´åˆ**
```
1. åˆå¹¶æ‰€æœ‰ç‰¹å¾ â†’ unified DataFrame
2. æ•°æ®éªŒè¯ â†’ æ£€æŸ¥ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼
3. ä¿å­˜ç»“æœï¼š
   â”œâ”€â”€ integrated_features_summary.csv
   â”œâ”€â”€ metadata.json (å‚æ•°ã€æ—¶é—´æˆ³ã€ç»Ÿè®¡ä¿¡æ¯)
   â””â”€â”€ extraction_log.txt (å¤„ç†æ—¥å¿—)
```

---

## ğŸ›ï¸ **ç”¨æˆ·ç•Œé¢è®¾è®¡**

### **æ¨¡å—7å¢å¼ºåŠŸèƒ½**
```html
<!-- RQAå‚æ•°é€‰æ‹©å™¨ -->
<div class="rqa-config-selector">
    <label>é€‰æ‹©RQAå‚æ•°é…ç½®:</label>
    <select id="rqaConfigSelect">
        <option value="m2_tau1_eps0.055_lmin2">m=2, Ï„=1, Îµ=0.055, l_min=2</option>
        <option value="m3_tau2_eps0.1_lmin3">m=3, Ï„=2, Îµ=0.1, l_min=3</option>
        <!-- åŠ¨æ€ç”Ÿæˆ -->
    </select>
    <button onclick="loadRealData()">åŠ è½½çœŸå®æ•°æ®</button>
</div>

<!-- æ•°æ®å¤„ç†çŠ¶æ€ -->
<div class="data-processing-status">
    <div class="progress-bar">
        <div class="step">1. æ‰«ææ•°æ®æº</div>
        <div class="step">2. æå–ç‰¹å¾</div>
        <div class="step">3. æ•°æ®æ•´åˆ</div>
        <div class="step">4. ä¿å­˜ç»“æœ</div>
    </div>
</div>
```

---

## ğŸš€ **å®æ–½è®¡åˆ’**

### **Step 1: æ¸…ç†æ¨¡æ‹Ÿä»£ç ** (ç«‹å³æ‰§è¡Œ)
- åˆ é™¤ `generateMockData()`, `generateMockEyeMovementData()`, `generateMockMMSEData()`
- ç§»é™¤æ‰€æœ‰ `Math.random()` ç›¸å…³çš„æ•°æ®ç”Ÿæˆä»£ç 

### **Step 2: æ•°æ®æºåˆ†æ** (æ·±å…¥è°ƒç ”)
- è¯»å–å¹¶åˆ†æRQAç»“æœæ–‡ä»¶çš„ç¡®åˆ‡å­—æ®µ
- éªŒè¯ROIäº‹ä»¶æ•°æ®çš„å®Œæ•´æ€§
- ç¡®è®¤æ ¡å‡†æ•°æ®çš„æ—¶é—´æˆ³æ ¼å¼

### **Step 3: ç‰¹å¾æå–å¼•æ“** (æ ¸å¿ƒå¼€å‘)
- å®ç°æ¸¸æˆæ—¶é•¿è®¡ç®—å™¨
- å®ç°ROIç‰¹å¾èšåˆå™¨
- å®ç°RQAç‰¹å¾æ ‡å‡†åŒ–å™¨

### **Step 4: æ•´åˆç³»ç»Ÿ** (ç³»ç»Ÿé›†æˆ)
- å¤šæºæ•°æ®åˆå¹¶é€»è¾‘
- å½’ä¸€åŒ–ç®¡é“
- ç»“æœéªŒè¯æœºåˆ¶

### **Step 5: å­˜å‚¨ç®¡ç†** (åŸºç¡€è®¾æ–½)
- åˆ›å»ºç›®å½•ç»“æ„
- å®ç°ç¼“å­˜æœºåˆ¶
- ç‰ˆæœ¬æ§åˆ¶é€»è¾‘

### **Step 6: ç”¨æˆ·ç•Œé¢** (å‰ç«¯å¼€å‘)
- RQAå‚æ•°é€‰æ‹©å™¨
- æ•°æ®åŠ è½½è¿›åº¦æ¡
- ç»“æœé¢„è§ˆè¡¨æ ¼

---

## â“ **å¾…ç¡®è®¤é—®é¢˜**

### **æ•°æ®æ ¼å¼éªŒè¯**
1. RQAç»“æœCSVçš„ç¡®åˆ‡å­—æ®µåç§°æ˜¯ä»€ä¹ˆï¼Ÿ
2. ROIäº‹ä»¶æ•°æ®æ˜¯å¦åŒ…å«æ‰€æœ‰éœ€è¦çš„å—è¯•è€…ï¼Ÿ
3. æ ¡å‡†æ•°æ®çš„æ—¶é—´æˆ³å•ä½æ˜¯ä»€ä¹ˆï¼ˆæ¯«ç§’/ç§’ï¼‰ï¼Ÿ

### **å½’ä¸€åŒ–ç­–ç•¥**
1. æ¯ä¸ªç‰¹å¾çš„å½’ä¸€åŒ–æ–¹æ³•ï¼ˆMin-Max/Z-Score/è‡ªå®šä¹‰ï¼‰ï¼Ÿ
2. å½’ä¸€åŒ–çš„èŒƒå›´æ˜¯å…¨å±€ï¼ˆæ‰€æœ‰ç»„ï¼‰è¿˜æ˜¯åˆ†ç»„ï¼ˆæŒ‰group_typeï¼‰ï¼Ÿ
3. å¦‚ä½•å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼ï¼Ÿ

### **æ€§èƒ½è€ƒè™‘**
1. æ•°æ®å¤„ç†çš„é¢„æœŸæ—¶é—´ï¼ˆå‡ ç§’/å‡ åˆ†é’Ÿï¼‰ï¼Ÿ
2. æ˜¯å¦éœ€è¦åå°å¤„ç†å’Œè¿›åº¦æŒ‡ç¤ºï¼Ÿ
3. ç¼“å­˜ç­–ç•¥å¦‚ä½•è®¾è®¡ï¼Ÿ

---

**ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨**

1. **ç«‹å³**: åˆ é™¤æ‰€æœ‰æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå‡½æ•°
2. **åˆ†æ**: è¯¦ç»†æŸ¥çœ‹RQAç»“æœæ–‡ä»¶çš„å­—æ®µç»“æ„
3. **è®¾è®¡**: ç¡®å®šå…·ä½“çš„ç‰¹å¾æå–ç®—æ³•
4. **å¼€å‘**: é€æ­¥å®ç°çœŸå®æ•°æ®æ•´åˆç³»ç»Ÿ

æ‚¨å¸Œæœ›æˆ‘å…ˆä»å“ªä¸ªæ­¥éª¤å¼€å§‹ï¼Ÿæˆ‘å»ºè®®é¦–å…ˆåˆ é™¤æ¨¡æ‹Ÿä»£ç ï¼Œç„¶åæ·±å…¥åˆ†ææ•°æ®æ–‡ä»¶çš„ç¡®åˆ‡ç»“æ„ã€‚